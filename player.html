<!DOCTYPE html>
<html>
<head>
<title>Live Stream Player</title>
<style>
  body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }
  #video { width: 100%; height: 100%; background: #000; }
  .error { color: white; text-align: center; padding-top: 40vh; font-family: sans-serif; }
</style>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
</head>
<body>

<video id="video" controls autoplay></video>
<div id="error-message" class="error" style="display:none;">Channel link not found.</div>

<script>
  var video = document.getElementById('video');
  var errorMessage = document.getElementById('error-message');
  
  // Get the channel link from the URL parameter (?channel=...)
  const urlParams = new URLSearchParams(window.location.search);
  const videoSrc = urlParams.get('channel');

  if (videoSrc) {
    if (Hls.isSupported()) {
      var hls = new Hls();
      hls.loadSource(videoSrc);
      hls.attachMedia(video);
      hls.on(Hls.Events.MANIFEST_PARSED, function() {
        video.play().catch(e => console.log("Autoplay was blocked"));
      });
    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
      video.src = videoSrc;
      video.addEventListener('loadedmetadata', function() {
        video.play().catch(e => console.log("Autoplay was blocked"));
      });
    }
  } else {
    // If no channel link is found, hide video and show error
    video.style.display = 'none';
    errorMessage.style.display = 'block';
  }
</script>

</body>
</html>
